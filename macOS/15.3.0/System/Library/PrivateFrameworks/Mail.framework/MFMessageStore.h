@class NSDate, NSString, MFMailbox, MFMailAccount, NSArray, NSOperationQueue, MCActivityMonitor, MCInvocationQueue, NSTimer, NSMutableArray, NSMutableSet, NSCache;

@interface MFMessageStore : NSObject <MCMessageDataSource> {
    id _retainCountLock;
    BOOL _isWritingChangesToDisk;
    BOOL _isTryingToClose;
    id _cacheLock;
    NSCache *_headerCache;
    NSCache *_bodyCache;
    _Atomic int _storeState;
    NSTimer *_timer;
    MFMailbox *_mailbox;
    NSMutableArray *_allMessages;
    MFMailAccount *_account;
    NSMutableSet *_uniqueStrings;
    BOOL _compactOnClose;
}

@property (retain) MCActivityMonitor *openMonitor;
@property (readonly, nonatomic) NSOperationQueue *deleteQueue;
@property (readonly, nonatomic) MCInvocationQueue *openAndCloseMailboxQueue;
@property BOOL isReadOnly;
@property BOOL hasUnsavedChangesToMessageData;
@property BOOL forceInvalidation;
@property (readonly, nonatomic) BOOL shouldCallCompactWhenClosing;
@property (readonly) int storeState;
@property BOOL isFirstTimeSync;
@property (readonly) NSDate *lastSyncDate;
@property (readonly, nonatomic) MFMailAccount *account;
@property (readonly, nonatomic) MFMailbox *mailbox;
@property (readonly, copy, nonatomic) NSArray *allMailboxRepresentations;
@property (readonly, nonatomic) BOOL isOpened;
@property (readonly, copy, nonatomic) NSString *status;
@property (readonly, nonatomic) const char *displayNameForLogging;
@property (readonly, nonatomic) BOOL isTrash;
@property (readonly) BOOL canRebuild;
@property (readonly, nonatomic) BOOL allowsAppend;
@property (readonly, nonatomic) BOOL allowsOverwrite;
@property (readonly, nonatomic) BOOL allowsDeleteInPlace;
@property (readonly) unsigned long long totalCount;
@property (readonly, copy, nonatomic) NSString *sortOrder;
@property (readonly) BOOL isSortedAscending;
@property (readonly, nonatomic) BOOL canCompact;
@property (readonly, copy, nonatomic) NSString *displayName;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (void)initialize;
+ (id)log;
+ (void)_autosaveMessageStore:(id)a0;
+ (id)_copyRawAvailableStoreForMailbox:(id)a0 creationBlock:(id /* block */)a1;
+ (BOOL)createEmptyStoreIfNeededForPath:(id)a0 notIndexable:(BOOL)a1;
+ (id)currentlyAvailableStoreForMailbox:(id)a0;
+ (id)currentlyAvailableStoresForAccount:(id)a0;
+ (id)descriptionOfOpenStores;
+ (unsigned long long)numberOfCurrentlyOpenStores;
+ (void)removeStoreFromCache:(id)a0;
+ (void)test_invalidateStoresAndMailboxes;

- (oneway void)release;
- (void)dealloc;
- (id)copyWithZone:(struct _NSZone { } *)a0;
- (id)init;
- (id)retain;
- (unsigned long long)retainCount;
- (void).cxx_destruct;
- (id)objectSpecifier;
- (void)_invalidate;
- (void)saveChanges;
- (id)initWithAccount:(id)a0;
- (void)setAllMessages:(id)a0;
- (void)invalidateMessage:(id)a0;
- (void)willOpen;
- (void)messagesWereAdded:(id)a0;
- (id)moveMessages:(id)a0 destinationMailboxURL:(id)a1 userInitiated:(BOOL)a2;
- (void)test_tearDown;
- (id)async_setLocalFlagsForMessages:(id)a0;
- (void)_cancelAutosave;
- (id)_cachedBodyForMessage:(id)a0 valueIfNotPresent:(id)a1;
- (id)_cachedHeadersForMessage:(id)a0 valueIfNotPresent:(id)a1;
- (id)_defaultRouterDestination;
- (void)_flushAllMessageData;
- (void)_invalidateInBackground;
- (void)_invalidateObjectCachesForKey:(id)a0;
- (BOOL)_isReadyToBeInvalidated;
- (void)_messageStoreCommonInit;
- (unsigned long long)_numberOfMessagesToCache;
- (id)_routeMessages:(id)a0 fetchingBodies:(BOOL)a1 messagesNeedingBodies:(id)a2;
- (void)_selectedDecoderHasChanged:(id)a0;
- (void)_setBackgroundColorForMessages:(id)a0 textColorForMessages:(id)a1;
- (void)_setFlagsAndColorForMessages:(id)a0;
- (void)_setNeedsAutosave;
- (id)_setOrGetValue:(id)a0 forKey:(id)a1 inCache:(id *)a2;
- (BOOL)_updateFlagColor:(char)a0 forMessage:(id)a1;
- (BOOL)_updateFlagForMessage:(id)a0 key:(id)a1 value:(BOOL)a2;
- (void)addMessagesToAllMessages:(id)a0;
- (void)addUniquedStrings:(id)a0;
- (void)async_deleteMessages:(id)a0 moveToTrash:(BOOL)a1;
- (void)async_setFlagsFromDictionary:(id)a0 forMessages:(id)a1;
- (id)bodyDataForMessage:(id)a0 andHeaderDataIfReadilyAvailable:(id *)a1 fetchIfNotAvailable:(BOOL)a2 allowPartial:(BOOL)a3;
- (id)bodyDataForMessage:(id)a0 fetchIfNotAvailable:(BOOL)a1 allowPartial:(BOOL)a2;
- (id)colorForMessage:(id)a0;
- (id)copyOfAllMessages;
- (id)copyOfAllMessagesWithOptions:(unsigned int)a0;
- (void)createDummyMailboxIfNecessary;
- (void)deleteMessages:(id)a0 moveToTrash:(BOOL)a1;
- (void)deleteMessagesOlderThanNumberOfDays:(long long)a0 compact:(BOOL)a1;
- (void)didOpenWithMessages:(id)a0;
- (void)doCompact;
- (id)finishRoutingMessages:(id)a0 routed:(id)a1;
- (void)flushAllCaches;
- (void)getTopLevelMimePart:(id *)a0 headers:(id *)a1 body:(id *)a2 forMessage:(id)a3 fetchIfNotAvailable:(BOOL)a4 updateFlags:(BOOL)a5 allowPartial:(BOOL)a6 skipSignatureVerification:(BOOL)a7 decodeContext:(id)a8;
- (id)headerDataForMessage:(id)a0 fetchIfNotAvailable:(BOOL)a1 allowPartial:(BOOL)a2;
- (unsigned long long)indexOfMessageInAllMessages:(id)a0;
- (id)initWithMailbox:(id)a0 readOnly:(BOOL)a1;
- (id)initWithMailbox:(id)a0 readOnly:(BOOL)a1 createEmptyStore:(BOOL)a2;
- (void)invalidateMessages:(id)a0;
- (void)invalidateSavingChanges:(BOOL)a0;
- (void)messageFlagsDidChange:(id)a0 flags:(id)a1;
- (id)messageForMessageID:(id)a0;
- (id)messagesForDocumentID:(id)a0;
- (void)messagesWereAdded:(id)a0 secondaryMessages:(id)a1 duringOpen:(BOOL)a2;
- (void)messagesWereCompacted:(id)a0;
- (void)messagesWereUpdated:(id)a0;
- (void)muteConversationForMessages:(id)a0;
- (id)objectSpecifierForMessage:(id)a0;
- (void)openAsynchronously;
- (void)openAsynchronouslyWithOptions:(unsigned int)a0;
- (void)openSynchronously;
- (void)queueSaveChangesInvocation;
- (void)rebuildTableOfContentsAsynchronously;
- (id)recentMessageWithValue:(id)a0 forHeader:(id)a1;
- (void)removeAllMessagesAtIndexes:(id)a0;
- (void)removeMessageFromAllMessages:(id)a0;
- (id)routeMessages:(id)a0 fetchingBodies:(BOOL)a1 messagesNeedingBodies:(id)a2;
- (void)saveSnippetsForMessages:(id)a0;
- (void)sendResponseType:(char)a0 forMeetingMessage:(id)a1 completionHandler:(id /* block */)a2;
- (void)setColor:(id)a0 highlightTextOnly:(BOOL)a1 forMessages:(id)a2;
- (void)setFlagWithKey:(id)a0 state:(BOOL)a1 forMessages:(id)a2;
- (id)setFlagsFromDictionary:(id)a0 forMessages:(id)a1;
- (id)setJunkMailLevel:(long long)a0 forMessages:(id)a1 trainJunkMailDatabase:(BOOL)a2 userRecorded:(BOOL)a3;
- (void)setNumberOfAttachments:(unsigned int)a0 isSigned:(BOOL)a1 isEncrypted:(BOOL)a2 forMessage:(id)a3;
- (id)setPersistenceConversationFlags:(unsigned long long)a0 forMessages:(id)a1;
- (id)setPrimitiveConversationFlags:(unsigned long long)a0 forMessages:(id)a1;
- (id)setPrimitiveFlagsFromDictionary:(id)a0 forMessages:(id)a1;
- (BOOL)setStoreState:(int)a0 fromState:(int)a1;
- (void)setUniquedStrings:(id)a0;
- (BOOL)shouldSendUserNotificationForMessage:(id)a0;
- (void)structureDidChange;
- (void)suggestSortOrder:(id)a0 ascending:(BOOL)a1;
- (id)uniquedString:(id)a0;
- (void)unmuteConversationForMessages:(id)a0;
- (void)updateBodyFlagsForMessage:(id)a0 topLevelMimePart:(id)a1;
- (void)updateMessages:(id)a0 updateColor:(BOOL)a1 updateNumberOfAttachments:(BOOL)a2;
- (long long)updateMessages:(id)a0 withLibraryIDs:(id)a1 newMessages:(id *)a2;
- (void)updateMetadataAsynchronously;
- (id)willDeallocPerformingInStoreCacheLock:(BOOL *)a0;

@end
